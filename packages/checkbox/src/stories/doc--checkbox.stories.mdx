import { ArgsTable, Canvas, Meta, Story } from "@storybook/addon-docs";
import { componentArgs } from "../constants";
import {
  ComponentTitle,
  InstallationInstructions,
  MuiLink
} from "../../../docs/src/partials";
import { peerDependencies } from "../../package.json";
import Checkbox from "@mui/material/Checkbox";
import FormControl from "@mui/material/FormControl";
import FormControlLabel from "@mui/material/FormControlLabel";
import FormGroup from "@mui/material/FormGroup";
import FormLabel from "@mui/material/FormLabel";

import prettier from "prettier/standalone";
import prettierBabel from "prettier/parser-babel";

<Meta
  args={{
    checked: false,
    disabled: false,
    indeterminate: false,
    size: "medium"
  }}
  argTypes={componentArgs}
  component={Checkbox}
  id="components/checkbox"
  title="Digital HIG/Components/Checkbox"
/>

<ComponentTitle name="Checkbox" status="Stable" />

<code>
  <MuiLink
    componentName="Checkbox"
    link="https://mui.com/material-ui/react-checkbox/"
  />
</code>

The checkbox component applies Digital HIG styles to MUI [Checkbox](https://mui.com/components/checkboxes/), with Digital HIG defaults.

For related design documentation, please see the [Digital HIG Figma UI Toolkit](https://www.figma.com/file/Eks986gkqncHjkLnwQjO7g/iccc-sticker-sheets?node-id=4203%3A253462&t=iL4WgXwqDMZvxUAw-1).

## Installation

<InstallationInstructions
  componentImport="Checkbox"
  peerDependencies={peerDependencies}
/>

## API

See the [checkbox API](https://mui.com/material-ui/api/checkbox/) for all supported MUI props.

Please note: This sample checkbox will not change state on click, because it is a controlled component (i.e., it receives a `checked` prop value). Please use the checked prop toggle to see the change in checked state.

<Canvas>
  <Story name="API">{(args) => <Checkbox {...args} />}</Story>
</Canvas>

<ArgsTable story="API" />

### Checkbox wrapped in form control label

For most practical applications, checkboxes will be rendered inside a MUI [`<FormControlLabel/>`](https://mui.com/api/form-control-label/) component that provides a label and other properties. All the examples below display usage of checkbox instances using this pattern. Use the following to import `FormControlLabel`.

```jsx
import FormControlLabel from "@mui/material/FormControlLabel";
```

## Checkbox states

### Unchecked

Default state of checkbox is unchecked.

<Canvas>
  <Story name="States: Unchecked">
    <FormControlLabel control={<Checkbox />} label="Unchecked" />
  </Story>
</Canvas>

### Disabled

A checkbox can be rendered in a disabled state. Notice the disabled state is applied to `<FormControlLabel />` to enable rendering the label itself in a disabled state. The checkbox component inherits the disabled state automatically.

<Canvas>
  <Story name="States: Disabled">
    <FormControlLabel control={<Checkbox />} label="Disabled" disabled />
  </Story>
</Canvas>

### Checked

A [controlled checkbox](https://reactjs.org/docs/forms.html#controlled-components) can be rendered in a checked state using the `checked` prop.

An [uncontrolled checkbox](https://reactjs.org/docs/uncontrolled-components.html) can be rendered in a checked state using the `defaultChecked` prop.

<Canvas>
  <Story
    name="States: Checked"
    parameters={{
      docs: {
        source: {
          type: "code"
        },
        transformSource: (input) =>
          prettier.format(input, {
            parser: "babel",
            plugins: [prettierBabel]
          })
      }
    }}
  >
    {() => {
      const [state, setState] = React.useState(true);
      const handleChange = (event) => {
        setState(!state);
      };
      return (
        <FormGroup>
          <FormControlLabel
            checked={state}
            control={<Checkbox />}
            label="Controlled checkbox"
            onChange={handleChange}
          />
          <FormControlLabel
            control={<Checkbox defaultChecked />}
            label="Uncontrolled checkbox"
          />
        </FormGroup>
      );
    }}
  </Story>
</Canvas>

### Checked and disabled

Props can be combined.

<Canvas>
  <Story name="States: Checked and disabled">
    <FormControlLabel
      checked
      control={<Checkbox />}
      disabled
      label="Checked and disabled"
    />
  </Story>
</Canvas>

### Indeterminate

If an indeterminate state is desired it must be set on the checkbox component itself.

<Canvas>
  <Story name="States: Indeterminate">
    <FormControlLabel
      control={<Checkbox indeterminate />}
      label="Indeterminate"
    />
  </Story>
</Canvas>

### Error

A standalone checkbox can be rendered in error state using `error` prop on the `<FormControlLabel />` component.

<Canvas>
  <Story name="States: Error">
    <FormControlLabel control={<Checkbox />} error label="Error" />
  </Story>
</Canvas>

### Small

A checkbox can be rendered as follows.

<Canvas>
  <Story name="Variants: Small">
    <FormControlLabel
      control={<Checkbox size="small" />}
      label="Small"
      slotProps={{
        typography: {
          variant: "smallprint"
        }
      }}
    />
  </Story>
</Canvas>

## Checkbox group

In many situations, checkboxes will appear as part of a group. For this use case it is recommended to use a combination of:

- MUI `<FormControl />` to wrap the group and pass other contextual props
- MUI `<FormLabel />` to pass the group label
- MUI `<FormGroup />` to group all the checkboxes in a single group

<Canvas>
  <Story name="Checkbox group">
    <FormControl component="fieldset">
      <FormLabel component="legend">Checkbox group</FormLabel>
      <FormGroup>
        <FormControlLabel control={<Checkbox />} label="One" />
        <FormControlLabel control={<Checkbox />} label="Two" />
        <FormControlLabel control={<Checkbox />} label="Three" />
      </FormGroup>
    </FormControl>
  </Story>
</Canvas>

### Multi-line label

For multi-line label top alignment, the following styles can be passed:

- Checkbox: `<Checkbox style={{ marginTop: "0" }} />`
- FormControlLabel: `<FormControlLabel style={{ alignItems: "flex-start" }} />`

<Canvas>
  <Story name="Multi-line label">
    <FormControlLabel
      control={<Checkbox defaultChecked style={{ marginTop: "0" }} />}
      label="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."
      style={{ alignItems: "flex-start" }}
    />
  </Story>
</Canvas>

### Dark theme

<Canvas>
  <Story name="Dark theme" parameters={{ theme: "dark" }}>
    <FormGroup>
      <FormControlLabel control={<Checkbox defaultChecked />} label="Checked" />
      <FormControlLabel
        control={<Checkbox indeterminate />}
        label="Indeterminate"
      />
      <FormControlLabel control={<Checkbox />} error label="Error" />
      <FormControlLabel control={<Checkbox disabled />} label="Disabled" />
    </FormGroup>
  </Story>
</Canvas>

## Accessibility

For more details about accessibility for checkbox, visit the [MUI Checkbox Accessibility section](https://mui.com/components/checkboxes/#accessibility)
