import { ArgsTable, Canvas, Meta, Story } from "@storybook/addon-docs";
import { componentArgs } from "../constants";
import {
  ComponentTitle,
  DarkThemeNotice,
  InstallationInstructions,
  VariantRangeNotice,
  VersionNotice
} from "../../../docs/src/partials";
import { name, peerDependencies, version } from "../../package.json";
import { useState } from "react";
import Box from "@mui/material/Box";
import FormHelperText from "@mui/material/FormHelperText";
import InputLabel from "@mui/material/InputLabel";
import SecurityCode from "../security-code.js";
import SvgComplete from "@iccc/icon/lib/build/display-icons/complete";
import SvgError from "@iccc/icon/lib/build/display-icons/error";
import SvgIcon from "@mui/material/SvgIcon";

<Meta
  args={{ dense: false, disabled: false, error: false, numInputs: 6 }}
  argTypes={componentArgs}
  component={SecurityCode}
  id="components/security-code"
  title="Digital HIG/Components/Security code"
  parameters={{
    docs: {
      source: {
        type: "code"
      }
    }
  }}
/>

<ComponentTitle name="Security code" status="In Progress" />

<code>
  <VersionNotice packageName="security-code" version={version} />
</code>

The security code component is a wrapper around MUI [`<Input>`](https://mui.com/material-ui/api/input/) and [`<OtpInput>`](https://github.com/devfolioco/react-otp-input), with Digital HIG defaults.

For related design documentation, please see the [Digital HIG Figma UI Toolkit](https://www.figma.com/file/DQ8xJcGSthKFpnOnZIneco/text-input---text-area?type=design&node-id=1206-114716&mode=design&t=Fy3JP122C12x8MhV-0).

## Installation

<InstallationInstructions
  componentImport="SecurityCode"
  name={name}
  peerDependencies={peerDependencies}
/>

## API

<Canvas>
  <Story name="API">
    {(args) => {
      const [value, setValue] = useState("");
      return (
        <>
          <InputLabel {...args}>API</InputLabel>
          <SecurityCode
            value={value}
            onChange={(newValue) => setValue(newValue)}
            {...args}
          />
        </>
      );
    }}
  </Story>
</Canvas>

<ArgsTable story="API" />

## Security code variants

<VariantRangeNotice />

### Density

#### Density: normal

<Canvas>
  <Story name="Density: normal">
    {() => {
      const [value, setValue] = useState("");
      return (
        <>
          <InputLabel>Default</InputLabel>
          <SecurityCode
            value={value}
            onChange={(newValue) => setValue(newValue)}
          />
        </>
      );
    }}
  </Story>
</Canvas>

#### Density: dense

Use the `dense` prop to render a smaller size.

<Canvas>
  <Story name="Density: dense">
    {() => {
      const [value, setValue] = useState("");
      return (
        <>
          <InputLabel>Dense</InputLabel>
          <SecurityCode
            dense
            value={value}
            onChange={(newValue) => setValue(newValue)}
          />
        </>
      );
    }}
  </Story>
</Canvas>

### Omit label

Omit the `<InputLabel />` component to render the security code input without a label.

<Canvas>
  <Story name="Omit label">
    {() => {
      const [value, setValue] = useState("");
      return (
        <SecurityCode
          value={value}
          onChange={(newValue) => setValue(newValue)}
        />
      );
    }}
  </Story>
</Canvas>

### Error

Use the `error` prop in both `<SecurityCode />` and `<FormHelperText />` to render an error state.

<Canvas>
  <Story name="Error">
    {() => {
      const [value, setValue] = useState("");
      return (
        <>
          <InputLabel>Error</InputLabel>
          <SecurityCode
            error
            value={value}
            onChange={(newValue) => setValue(newValue)}
          />
          <FormHelperText error>
            <SvgIcon>
              <SvgError />
            </SvgIcon>
            Error text: Laborum velit est et culpa do anim excepteur cillum cupidatat
            deserunt sint. Eiusmod ut aute labore ad dolor ipsum elit esse. Cupidatat
            ad est voluptate qui aliquip culpa sunt enim excepteur.
          </FormHelperText>
        </>
      );
    }}
  </Story>
</Canvas>

### Success

Use the `<FormHelperText />` and `<SvgComplete />` components to render a success state.

<Canvas>
  <Story name="Success">
    {() => {
      const [value, setValue] = useState("");
      return (
        <>
          <InputLabel>Success</InputLabel>
          <SecurityCode
            value={value}
            onChange={(newValue) => setValue(newValue)}
          />
          <FormHelperText
            sx={({ tokens, primitives }) => ({
              fontWeight: primitives.fontWeights.stout,
              color: tokens.colors["ink-on-background"]
            })}
          >
            <SvgIcon>
              <SvgComplete />
            </SvgIcon>
            Laborum velit est et culpa do anim excepteur cillum cupidatat deserunt
            sint. Eiusmod ut aute labore ad dolor ipsum elit esse. Cupidatat ad est
            voluptate qui aliquip culpa sunt enim excepteur.
          </FormHelperText>
        </>
      );
    }}
  </Story>
</Canvas>

### Disabled

Use the `disabled` prop to render a disabled state.

<Canvas>
  <Story name="Disabled">
    <>
      <InputLabel disabled>Disabled</InputLabel>
      <SecurityCode
        value="123456"
        onChange={(newValue) => setValue(newValue)}
        disabled
      />
    </>
  </Story>
</Canvas>

### Dark theme

<DarkThemeNotice />

<Canvas>
  <Story name="Dark theme" parameters={{ theme: "dark" }}>
    {() => {
      const [value, setValue] = useState("");
      return (
        <>
          <InputLabel>Default</InputLabel>
          <SecurityCode
            value={value}
            onChange={(newValue) => setValue(newValue)}
          />
          <Box mt={6} />
          <InputLabel>Dense</InputLabel>
          <SecurityCode
            dense
            value={value}
            onChange={(newValue) => setValue(newValue)}
          />
        </>
      );
    }}
  </Story>
</Canvas>
