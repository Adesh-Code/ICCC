import { ArgsTable, Canvas, Meta, Story } from "@storybook/addon-docs";
import { componentArgs } from "../constants";
import {
  ComponentTitle,
  DarkThemeNotice,
  InstallationInstructions,
  VariantRangeNotice,
  VersionNotice
} from "../../../docs/src/partials";
import { defaultProps } from "../table";
import { name, peerDependencies, version } from "../../package.json";
import Box from "@mui/material/Box";
import Checkbox from "@mui/material/Checkbox";
import FormControlLabel from "@mui/material/FormControlLabel";
import Table from "@iccc/table";
import TableBody from "@mui/material/TableBody";
import TableCell from "@mui/material/TableCell";
import TableHead, { getComparator, stableSort } from "@iccc/table-head";
import TableRow from "@iccc/table-row";

export const headCells = [
  {
    id: "column1",
    label: "Column 1"
  },
  {
    id: "column2",
    label: "Column 2"
  }
];

export const rowData = [
  { name: "Alfa", number: 10 },
  { name: "Zulu", number: 2 },
  { name: "Delta", number: 5 },
  { name: "Yankee", number: 11 },
  { name: "Bravo", number: 3 },
  { name: "Xray", number: 1 },
  { name: "Tango", number: 7 },
  { name: "Charlie", number: 6 },
  { name: "Uniform", number: 13 },
  { name: "Echo", number: 4 },
  { name: "Victor", number: 9 },
  { name: "Foxtrot", number: 12 },
  { name: "Whiskey", number: 8 }
];

<Meta
  args={defaultProps}
  argTypes={componentArgs}
  component={Table}
  id="components/table"
  title="Digital HIG/Components/Table"
/>

<ComponentTitle name="Table" status="Stable" />

<code>
  <VersionNotice packageName="table" version={version} />
</code>

The table component is a wrapper around MUI [`<Table>`](https://mui.com/material-ui/react-table/), with Digital HIG defaults.

For related design documentation, please see the [Digital HIG Figma UI Toolkit](https://www.figma.com/file/Eks986gkqncHjkLnwQjO7g/iccc-sticker-sheets?node-id=4203%3A299577&t=iL4WgXwqDMZvxUAw-1).

## Installation

<InstallationInstructions
  name={name}
  peerDependencies={peerDependencies}
  componentImport="Table"
/>

## API

- For all supported MUI `<Table />` props, see [Table API](https://mui.com/material-ui/api/table/).
- For all supported MUI `<TableBody />` props, see [TableBody API](https://mui.com/material-ui/api/table-body/).
- For all supported `<TableCell />` props, see [table cell component page](/docs/components-table-cell--api).
- For all supported `<TableHead />` props, see [table head component page](/docs/components-table-head--api).
- For all supported `<TableRow />` props, see [table row component page](/docs/components-table-row--api).

<Canvas>
  <Story name="API">
    {(args) => (
      <Table {...args}>
        <TableHead headCells={headCells} />
        <TableBody>
          <TableRow>
            <TableCell>Cell 1.1</TableCell>
            <TableCell>Cell 1.2</TableCell>
          </TableRow>
          <TableRow>
            <TableCell>Cell 2.1</TableCell>
            <TableCell>Cell 2.2</TableCell>
          </TableRow>
          <TableRow>
            <TableCell>Cell 3.1</TableCell>
            <TableCell>Cell 3.2</TableCell>
          </TableRow>
          <TableRow>
            <TableCell>
              This cell should have enough text to validate the vertical
              alignment changes. Options are either top or center alignment.
              Check it out by changing the verticalAlignment option below.
            </TableCell>
            <TableCell>Cell 4.2</TableCell>
          </TableRow>
        </TableBody>
      </Table>
    )}
  </Story>
</Canvas>

<ArgsTable story="API" />

## Variants

<VariantRangeNotice />

### Small table

Use the MUI prop `size` to produce a denser rendition of the table.

<Canvas>
  <Story name="Small">
    <Table size="small">
      <TableHead headCells={headCells} />
      <TableBody>
        <TableRow>
          <TableCell>Cell 1.1</TableCell>
          <TableCell>Cell 1.2</TableCell>
        </TableRow>
      </TableBody>
    </Table>
  </Story>
</Canvas>

### Vertical alignment

Use the prop `verticalAlignment` to control cell content alignment in the vertical axis.

<Canvas>
  <Story name="Vertical alignment">
    <>
      <Table verticalAlignment="center">
        <TableHead headCells={headCells} />
        <TableBody>
          <TableRow>
            <TableCell>
              <b>Center alignment.</b> Lorem ipsum dolor sit amet, consectetur
              adipiscing elit, sed do eiusmod tempor incididunt ut labore et
              dolore magna aliqua. Ut enim ad minim veniam.
            </TableCell>
            <TableCell>Cell 1.2</TableCell>
          </TableRow>
        </TableBody>
      </Table>
      <Table>
        <TableHead headCells={headCells} />
        <TableBody>
          <TableRow>
            <TableCell>
              <b>Top alignment.</b> Lorem ipsum dolor sit amet, consectetur
              adipiscing elit, sed do eiusmod tempor incididunt ut labore et
              dolore magna aliqua. Ut enim ad minim veniam.
            </TableCell>
            <TableCell>Cell 1.2</TableCell>
          </TableRow>
        </TableBody>
      </Table>
    </>
  </Story>
</Canvas>

### Loud

Use the prop `loud` to achieve this styling. Note that row interactions can be enabled or disabled using the `enableInteractions` prop. For more information, see the [TableRow component page](/docs/components-table-row--enable-interactions).

<Canvas>
  <Story name="Loud">
    <Table loud>
      <TableHead headCells={[{ id: "Checkbox", label: "" }, ...headCells]} />
      <TableBody>
        <TableRow>
          <TableCell padding="checkbox" />
          <TableCell>Cell 1.1</TableCell>
          <TableCell>Cell 1.2</TableCell>
        </TableRow>
        <TableRow selected>
          <TableCell padding="checkbox">
            <FormControlLabel control={<Checkbox checked />} />
          </TableCell>
          <TableCell>Selected</TableCell>
          <TableCell>Selected</TableCell>
        </TableRow>
        <TableRow highlighted>
          <TableCell padding="checkbox" />
          <TableCell>Highlighted</TableCell>
          <TableCell>Highlighted</TableCell>
        </TableRow>
        <TableRow selected highlighted>
          <TableCell padding="checkbox">
            <FormControlLabel control={<Checkbox checked />} />
          </TableCell>
          <TableCell>Selected & highlighted</TableCell>
          <TableCell>Selected & highlighted</TableCell>
        </TableRow>
      </TableBody>
    </Table>
  </Story>
</Canvas>

### Bordered

The `bordered` prop can be used to achieve this styling. It is only used for composing a panel list (see the [PanelList component page](/docs/components-panel-list--api) for more information).

<Canvas>
  <Story name="Bordered">
    <Table bordered>
      <TableHead headCells={[{ id: "Checkbox", label: "" }, ...headCells]} />
      <TableBody>
        <TableRow>
          <TableCell padding="checkbox" />
          <TableCell>Cell 1.1</TableCell>
          <TableCell>Cell 1.2</TableCell>
        </TableRow>
        <TableRow selected>
          <TableCell padding="checkbox">
            <FormControlLabel control={<Checkbox checked />} />
          </TableCell>
          <TableCell>Selected</TableCell>
          <TableCell>Selected</TableCell>
        </TableRow>
        <TableRow highlighted>
          <TableCell padding="checkbox" />
          <TableCell>Highlighted</TableCell>
          <TableCell>Highlighted</TableCell>
        </TableRow>
        <TableRow selected highlighted>
          <TableCell padding="checkbox">
            <FormControlLabel control={<Checkbox checked />} />
          </TableCell>
          <TableCell>Selected & highlighted</TableCell>
          <TableCell>Selected & highlighted</TableCell>
        </TableRow>
      </TableBody>
    </Table>
  </Story>
</Canvas>

### Zebra

Use the prop `zebra` to control row coloring.

<Canvas>
  <Story name="Zebra">
    <Table zebra>
      <TableHead headCells={headCells} />
      <TableBody>
        <TableRow>
          <TableCell>Cell 1.1</TableCell>
          <TableCell>Cell 1.2</TableCell>
        </TableRow>
        <TableRow>
          <TableCell>Cell 2.1</TableCell>
          <TableCell>Cell 2.2</TableCell>
        </TableRow>
        <TableRow>
          <TableCell>Cell 3.1</TableCell>
          <TableCell>Cell 3.2</TableCell>
        </TableRow>
        <TableRow>
          <TableCell>Cell 4.1</TableCell>
          <TableCell>Cell 4.2</TableCell>
        </TableRow>
      </TableBody>
    </Table>
  </Story>
</Canvas>

### Sortable

The `stableSort` and `getComparator` helper functions can be imported directly from `@iccc/table-head`, or you can use your own. For more information on table head props, visit the [`<TableHead />` component page](/docs/components-table-head--sortable).

<Canvas>
  <Story name="Sortable">
    {() => {
      const [order, setOrder] = React.useState("asc");
      const [orderBy, setOrderBy] = React.useState("name");
      const handleRequestSort = (_event, property) => {
        const isAsc = orderBy === property && order === "asc";
        setOrder(isAsc ? "desc" : "asc");
        setOrderBy(property);
      };
      return (
        <Table size="small">
          <TableHead
            headCells={[
              { id: "name", label: "Name" },
              { id: "number", label: "Number" }
            ]}
            enableSort
            order={order}
            orderBy={orderBy}
            onRequestSort={handleRequestSort}
          />
          <TableBody>
            {stableSort(rowData, getComparator(order, orderBy)).map(
              ({ name, number }) => (
                <TableRow key={name}>
                  <TableCell>{name}</TableCell>
                  <TableCell>{number}</TableCell>
                </TableRow>
              )
            )}
          </TableBody>
        </Table>
      );
    }}
  </Story>
</Canvas>

### Dark theme

<DarkThemeNotice />

<Canvas>
  <Story name="Dark theme" parameters={{ theme: "dark" }}>
    <>
      <Table>
        <TableHead headCells={[{ id: "Checkbox", label: "" }, ...headCells]} />
        <TableBody>
          <TableRow>
            <TableCell padding="checkbox" />
            <TableCell>Default table</TableCell>
            <TableCell>Default table</TableCell>
          </TableRow>
          <TableRow selected>
            <TableCell padding="checkbox">
              <FormControlLabel control={<Checkbox checked />} />
            </TableCell>
            <TableCell>Selected</TableCell>
            <TableCell>Selected</TableCell>
          </TableRow>
          <TableRow highlighted>
            <TableCell padding="checkbox" />
            <TableCell>Highlighted</TableCell>
            <TableCell>Highlighted</TableCell>
          </TableRow>
          <TableRow selected highlighted>
            <TableCell padding="checkbox">
              <FormControlLabel control={<Checkbox checked />} />
            </TableCell>
            <TableCell>Selected & highlighted</TableCell>
            <TableCell>Selected & highlighted</TableCell>
          </TableRow>
        </TableBody>
      </Table>
      <Box my={6} />
      <Table zebra>
        <TableHead headCells={headCells} />
        <TableBody>
          <TableRow>
            <TableCell>Zebra table</TableCell>
            <TableCell>Zebra table</TableCell>
          </TableRow>
          <TableRow>
            <TableCell>Cell 2.1</TableCell>
            <TableCell>Cell 2.2</TableCell>
          </TableRow>
          <TableRow>
            <TableCell>Cell 3.1</TableCell>
            <TableCell>Cell 3.2</TableCell>
          </TableRow>
          <TableRow>
            <TableCell>Cell 4.1</TableCell>
            <TableCell>Cell 4.2</TableCell>
          </TableRow>
        </TableBody>
      </Table>
      <Box my={6} />
      <Table loud>
        <TableHead headCells={[{ id: "Checkbox", label: "" }, ...headCells]} />
        <TableBody>
          <TableRow>
            <TableCell padding="checkbox" />
            <TableCell>Loud table</TableCell>
            <TableCell>Loud table</TableCell>
          </TableRow>
          <TableRow selected>
            <TableCell padding="checkbox">
              <FormControlLabel control={<Checkbox checked />} />
            </TableCell>
            <TableCell>Selected</TableCell>
            <TableCell>Selected</TableCell>
          </TableRow>
          <TableRow highlighted>
            <TableCell padding="checkbox" />
            <TableCell>Highlighted</TableCell>
            <TableCell>Highlighted</TableCell>
          </TableRow>
          <TableRow selected highlighted>
            <TableCell padding="checkbox">
              <FormControlLabel control={<Checkbox checked />} />
            </TableCell>
            <TableCell>Selected & highlighted</TableCell>
            <TableCell>Selected & highlighted</TableCell>
          </TableRow>
        </TableBody>
      </Table>
    </>
  </Story>
</Canvas>

## Accessibility

For more details about accessibility for tables, visit the [MUI table accessibility section](https://mui.com/material-ui/react-table/#accessibility).
