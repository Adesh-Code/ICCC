import { ArgsTable, Canvas, Meta, Story } from "@storybook/addon-docs";
import { componentArgs } from "../constants";
import {
  ComponentTitle,
  InstallationInstructions,
  MuiLink
} from "../../../docs/src/partials";
import Grid from "@mui/material/Grid";
import Skeleton from "@mui/material/Skeleton";
import Typography from "@iccc/typography";
import { peerDependencies } from "../../package.json";

export const SkeletonContent = ({ variant }) =>
  variant === "text" ? (
    <Typography>Lorem ipsum</Typography>
  ) : (
    <div
      style={{
        height: "100px",
        width: "100px"
      }}
    />
  );

<Meta
  args={{ animation: "pulse", variant: "text" }}
  argTypes={componentArgs}
  component={Skeleton}
  id="components/skeleton"
  title="Digital HIG/Components/Skeleton"
  parameters={{
    docs: {
      source: {
        type: "code"
      }
    }
  }}
/>

<ComponentTitle name="Skeleton" status="Stable" />

<code>
  <MuiLink
    componentName="Skeleton"
    link="https://mui.com/material-ui/react-skeleton/"
  />
</code>

The Skeleton component displays a placeholder preview of your content before the data gets loaded to reduce load-time frustration.

The data for your components might not be immediately available. You can increase the perceived performance for users by using skeletons. To the user, it feels like the page is responding immediately, then the information is incrementally displayed on the screen.

For related design documentation, please visit the [Digital HIG Figma UI Toolkit](https://www.figma.com/file/Eks986gkqncHjkLnwQjO7g/iccc-sticker-sheets?node-id=4203%3A285880&t=iL4WgXwqDMZvxUAw-1).

## Installation

<InstallationInstructions
  componentImport="Skeleton"
  peerDependencies={peerDependencies}
/>

## API

For all supported MUI `<Skeleton />` props, see [Skeleton API](https://mui.com/material-ui/api/skeleton/).

<Canvas>
  <Story
    name="API"
    parameters={{
      docs: {
        source: {
          type: "auto"
        }
      }
    }}
  >
    {(args) => (
      <Skeleton {...args}>
        <SkeletonContent variant={args.variant} />
      </Skeleton>
    )}
  </Story>
</Canvas>

<ArgsTable story="API" />

## Skeleton variants

The examples below illustrate the variant range for the skeleton component. Press the **Show code** button on the right of each example to view the implementation code.

The recommended use case is to wrap components with the `Skeleton` component.

#### Variant: Circular

<Canvas>
  <Story name="Variant: Circular">
    <Skeleton variant="circular">
      <SkeletonContent />
    </Skeleton>
  </Story>
</Canvas>

#### Variant: Rectangular

<Canvas>
  <Story name="Variant: Rectangular">
    <Skeleton variant="rectangular">
      <SkeletonContent />
    </Skeleton>
  </Story>
</Canvas>

#### Variant: Text

This variant can be used to wrap the Digital HIG `<Typography />` component, in order to provide an exact match for font size and line height.

<Canvas>
  <Story name="Variant: Text">
    <Skeleton>
      <Typography>Some text</Typography>
    </Skeleton>
  </Story>
</Canvas>

#### Size: Defined by container

Skeleton infers the width and height of its contents. For reference, see the [MUI page on inferring dimensions](https://mui.com/material-ui/react-skeleton/#inferring-dimensions).

<Canvas>
  <Story name="Size: Defined by container">
    {(args) => {
      const variants = [
        "display",
        "headline-large",
        "body-copy-medium",
        "caption"
      ];
      return (
        <Grid container>
          <Grid item xs={6}>
            <div>
              {variants.map((variant) => (
                <Typography component="div" key={variant} variant={variant}>
                  <Skeleton />
                </Typography>
              ))}
            </div>
          </Grid>
          <Grid item xs={6}>
            <div>
              {variants.map((variant) => (
                <Typography component="div" key={variant} variant={variant}>
                  {variant}
                </Typography>
              ))}
            </div>
          </Grid>
        </Grid>
      );
    }}
  </Story>
</Canvas>

#### Size: Arbitrary

The skeleton component can be set to any arbitrary size using the `width` and `height` props.

<Canvas>
  <Story name="Size: Arbitrary">
    <Skeleton variant="circular" width="50px" height="50px" />
  </Story>
</Canvas>

### Animations

By default, the skeleton pulsates, but you can change the animation to a wave or disable it entirely.

#### Animation: Pulse

<Canvas>
  <Story name="Animation: Pulse">
    <Skeleton animation="pulse" variant="circular">
      <SkeletonContent />
    </Skeleton>
  </Story>
</Canvas>

#### Animation: Wave

<Canvas>
  <Story name="Animation: Wave">
    <Skeleton animation="wave" variant="circular">
      <SkeletonContent />
    </Skeleton>
  </Story>
</Canvas>

#### Animation: Disabled

To remove the animation from skeleton, set the animation prop to `false`.

<Canvas>
  <Story name="Animation: Disabled">
    <Skeleton animation={false} variant="circular">
      <SkeletonContent />
    </Skeleton>
  </Story>
</Canvas>

#### Images: Fixed size ratio example

This fixed size example uses a calculation of the image ratio (height divided by width) and uses it as input for the skeleton content `paddingTop` value.

For example, for an image of 500px width and 200px height, the `paddingTop` value is set to `(200 / 500) * 100`, meaning `40%`.

<Canvas>
  <Story name="Images: Fixed size ratio">
    <Skeleton variant="rectangular" width="50%">
      <div style={{ paddingTop: "40%" }} />
    </Skeleton>
  </Story>
</Canvas>

### Dark theme

<Canvas>
  <Story
    name="Dark theme"
    parameters={{
      theme: "dark"
    }}
  >
    <Skeleton variant="circular">
      <SkeletonContent />
    </Skeleton>
  </Story>
</Canvas>

## Accessibility

- [Skeleton Accessibility](https://mui.com/material-ui/react-skeleton/#accessibility).
