import { ArgsTable, Canvas, Meta, Story } from "@storybook/addon-docs";
import { componentArgs } from "../constants";
import {
  ComponentTitle,
  DarkThemeNotice,
  InstallationInstructions,
  MuiLink,
  VariantRangeNotice
} from "../../../docs/src/partials";
import { peerDependencies } from "../../package.json";
import ButtonComponent from "@mui/material/Button";
import CircularProgress from "@iccc/circular-progress";
import CtaArrowRightIcon from "@iccc/icon/lib/build/icons/cta-arrow-right";
import Grid2 from "@mui/material/Unstable_Grid2";
import MuiLoadingButton from "@mui/lab/LoadingButton";
import SvgIcon from "@mui/material/SvgIcon";
import SyncIcon from "@iccc/icon/lib/build/icons/sync";

export const Button = (ButtonProps) => (
  <div style={{ padding: "8px 0" }}>
    <ButtonComponent {...ButtonProps} />
  </div>
);

export const LoadingButton = (LoadingButtonProps) => (
  <div style={{ padding: "8px 0" }}>
    <MuiLoadingButton {...LoadingButtonProps} />
  </div>
);

<Meta
  args={{
    children: "Button label",
    disabled: false,
    fullWidth: false,
    size: "medium",
    variant: "contained"
  }}
  argTypes={componentArgs}
  component={ButtonComponent}
  id="components/button"
  title="Digital HIG/Components/Button"
/>

<ComponentTitle name="Button" status="Stable" />

<code>
  <MuiLink
    componentName="Button"
    link="https://mui.com/material-ui/react-button/"
  />
</code>

The Button component is the out-of-the-box MUI [`<Button>`](https://mui.com/material-ui/react-button/), with Digital HIG defaults.

For related design documentation, please see the [Digital HIG Figma UI Toolkit](https://www.figma.com/file/Eks986gkqncHjkLnwQjO7g/iccc-sticker-sheets?node-id=4871%3A505775&t=pTfzpGDpokVB8t0o-1).

## Installation

<InstallationInstructions
  componentImport="Button"
  peerDependencies={peerDependencies}
/>

## API

- For all supported MUI `<Button />` props, see [Button API](https://mui.com/api/button/).
- For all supported MUI `<LoadingButton />` props, see [LoadingButton API](https://mui.com/material-ui/api/loading-button/).

<Canvas>
  <Story name="API">
    {(args) =>
      args.variant === "link-button" ? (
        <Button
          href="#"
          startIcon={
            <SvgIcon fontSize="medium">
              <CtaArrowRightIcon />
            </SvgIcon>
          }
          {...args}
        >
          Link button
        </Button>
      ) : (
        <Button {...args} />
      )
    }
  </Story>
</Canvas>

<ArgsTable story="API" />

## Button variants

<VariantRangeNotice />

### Layout options

MUI's `fullWidth` prop can be used for full-width buttons.

<Canvas>
  <Story name="Layout options">
    <Button>Default</Button>
    <Button fullWidth>Full-width</Button>
  </Story>
</Canvas>

### Space between icon

Use this example to create a full width button with a trailing icon aligned to the right.

<Canvas>
  <Story name="Space between icon">
    <Button
      sx={{
        justifyContent: "space-between",
        "&[class*='MuiButton-root']": {
          textAlign: "left"
        }
      }}
      fullWidth
      endIcon={
        <SvgIcon fontSize="medium">
          <SyncIcon />
        </SvgIcon>
      }
    >
      Space between layout
    </Button>
  </Story>
</Canvas>

### Size options

Accepts `medium` (default) or `small`.

<Canvas>
  <Story name="Size options">
    <Button>Default (medium) button</Button>
    <Button size="small">Small button</Button>
  </Story>
</Canvas>

### Variants

Accepted variants are `contained` (default), `outlined`, `text` or `link-button`.

<Canvas>
  <Story name="Variant options">
    <Button>Contained button</Button>
    <Button variant="outlined">Outlined button</Button>
    <Button variant="text">Text button</Button>
    <Button
      variant="link-button"
      href="#"
      startIcon={
        <SvgIcon fontSize="medium">
          <CtaArrowRightIcon />
        </SvgIcon>
      }
    >
      Link button
    </Button>
  </Story>
</Canvas>

### Icons

Leading or trailing icons can be added to buttons by making use of the [Digital HIG SvgIcon component](/docs/components-svg-icon--api) in combination with the `startIcon` and `endIcon` MUI props. They can be used with all three variants. For more information about implementation of the icon sprite, visit the [Digital HIG Reference App](https://pages.git.autodesk.com/dpe/iccc/#/ref-app/icons).

<Canvas>
  <Story name="Icons">
    <Button
      startIcon={
        <SvgIcon fontSize="medium">
          <SyncIcon />
        </SvgIcon>
      }
    >
      Leading
    </Button>
    <Button
      variant="outlined"
      startIcon={
        <SvgIcon fontSize="medium">
          <SyncIcon />
        </SvgIcon>
      }
    >
      Leading
    </Button>
    <Button
      variant="text"
      startIcon={
        <SvgIcon fontSize="medium">
          <SyncIcon />
        </SvgIcon>
      }
    >
      Leading
    </Button>
    <Button
      endIcon={
        <SvgIcon fontSize="medium">
          <SyncIcon />
        </SvgIcon>
      }
    >
      Trailing
    </Button>
    <Button
      variant="outlined"
      endIcon={
        <SvgIcon fontSize="medium">
          <SyncIcon />
        </SvgIcon>
      }
    >
      Trailing
    </Button>
    <Button
      variant="text"
      endIcon={
        <SvgIcon fontSize="medium">
          <SyncIcon />
        </SvgIcon>
      }
    >
      Trailing
    </Button>
  </Story>
</Canvas>

### Loading

[Loading button](https://mui.com/material-ui/react-button/#loading-button) is a `@mui/lab` component. You will need to install the library by running `yarn add @mui/lab`.

Once installed, you can import the component:

`import LoadingButton from "@mui/lab/LoadingButton";`

To display a loading state, the [Digital HIG Circular Progress component](/docs/components-circular-progress--api) can be used in combination with the `startIcon` and `endIcon` MUI props.

<Canvas>
  <Story name="Loading" parameters={{ vr: false }}>
    <LoadingButton
      loading
      loadingIndicator={<CircularProgress size="x-small" role="progressbar" />}
    >
      Loading
    </LoadingButton>
    <LoadingButton
      variant="outlined"
      loading
      loadingIndicator={<CircularProgress size="x-small" role="progressbar" />}
    >
      Loading
    </LoadingButton>
    <LoadingButton
      variant="text"
      loading
      loadingIndicator={<CircularProgress size="x-small" role="progressbar" />}
    >
      Loading
    </LoadingButton>
    <LoadingButton
      variant="link-button"
      loading
      loadingIndicator={<CircularProgress size="x-small" role="progressbar" />}
    >
      Loading
    </LoadingButton>
    <Grid2 container>
      <Grid2 sm={8} md={4} lg={3}>
        <LoadingButton
          loading
          loadingIndicator={
            <CircularProgress size="x-small" role="progressbar" />
          }
        >
          Leading icon with multiple lines of text
        </LoadingButton>
        <LoadingButton
          loading
          loadingPosition="end"
          loadingIndicator={
            <CircularProgress size="x-small" role="progressbar" />
          }
        >
          Trailing icon with multiple lines of text
        </LoadingButton>
      </Grid2>
    </Grid2>
  </Story>
</Canvas>

### Disabled state

<Canvas>
  <Story name="Disabled state">
    <Button disabled>Contained button</Button>
    <Button disabled variant="outlined">
      Outlined button
    </Button>
    <Button disabled variant="text">
      Text button
    </Button>
    <Button
      variant="link-button"
      disabled
      href="#"
      startIcon={
        <SvgIcon fontSize="medium">
          <CtaArrowRightIcon />
        </SvgIcon>
      }
    >
      Link button
    </Button>
  </Story>
</Canvas>

### Render link as button

Per Material-UI: The URL to link to when the button is clicked. If defined, an a element will be used as the root node.

<Canvas>
  <Story name="Link">
    <Button href="#">Link button</Button>
  </Story>
</Canvas>

### Dark theme

<DarkThemeNotice />

<Canvas>
  <Story name="Dark theme" parameters={{ theme: "dark" }}>
    <Button>Contained button</Button>
    <Button variant="outlined">Outlined button</Button>
    <Button variant="text">Text button</Button>
    <Button
      variant="link-button"
      href="#"
      startIcon={
        <SvgIcon fontSize="medium">
          <CtaArrowRightIcon />
        </SvgIcon>
      }
    >
      Link button
    </Button>
    <Button disabled>Disabled contained button</Button>
    <Button disabled variant="outlined">
      Disabled outlined button
    </Button>
    <Button disabled variant="text">
      Disabled text button
    </Button>
    <Button
      disabled
      variant="link-button"
      href="#"
      startIcon={
        <SvgIcon fontSize="medium">
          <CtaArrowRightIcon />
        </SvgIcon>
      }
    >
      Disabled link button
    </Button>
    <LoadingButton
      loading
      loadingIndicator={<CircularProgress size="x-small" role="progressbar" />}
    >
      Loading
    </LoadingButton>
    <LoadingButton
      variant="outlined"
      loading
      loadingIndicator={<CircularProgress size="x-small" role="progressbar" />}
    >
      Loading
    </LoadingButton>
    <LoadingButton
      variant="text"
      loading
      loadingIndicator={<CircularProgress size="x-small" role="progressbar" />}
    >
      Loading
    </LoadingButton>
    <LoadingButton
      variant="link-button"
      loading
      loadingIndicator={<CircularProgress size="x-small" role="progressbar" />}
    >
      Loading
    </LoadingButton>
  </Story>
</Canvas>

<Canvas>
  <Story
    name="VR: Icon alignment multiline"
    parameters={{
      docs: {
        source: {
          code: null
        }
      }
    }}
  >
    <Grid2 container>
      <Grid2 sm={8} md={4} lg={3}>
        <Button>No icon with multiple lines of text</Button>
        <Button
          startIcon={
            <SvgIcon fontSize="medium">
              <SyncIcon />
            </SvgIcon>
          }
        >
          Leading icon with multiple lines of text
        </Button>
        <Button
          endIcon={
            <SvgIcon fontSize="medium">
              <SyncIcon />
            </SvgIcon>
          }
        >
          Trailing icon with multiple lines of text
        </Button>
      </Grid2>
    </Grid2>
  </Story>
</Canvas>
