import { useState } from "react";
import { ArgsTable, Canvas, Meta, Story } from "@storybook/addon-docs";
import { componentArgs } from "../constants";
import {
  ComponentTitle,
  InstallationInstructions,
  VariantRangeNotice,
  VersionNotice
} from "../../../docs/src/partials";
import { name, peerDependencies, version } from "../../package.json";
import Box from "@mui/material/Box";
import FormControl from "@mui/material/FormControl";
import InputLabel from "@mui/material/InputLabel";
import Select from "@iccc/select";
import Tab from "@mui/material/Tab";
import Tabs from "../tabs";

<Meta
  args={Tabs.defaultProps}
  component={Tabs}
  argTypes={componentArgs}
  id="components/tabs"
  title="Digital HIG/Components/Tabs"
/>

<ComponentTitle name="Tabs" status="Stable" />

<code>
  <VersionNotice packageName="tabs" version={version} />
</code>

A thin wrapper around MUI [`<Tabs />`](https://mui.com/material-ui/react-tabs/), primed for usage as tabs.

For related design documentation, please see the [Digital HIG Figma UI Toolkit](https://www.figma.com/file/NpV47EII6zCxkpPoChejg0/Slate-UI?node-id=376%3A30131).

## Installation

<InstallationInstructions
  name={name}
  peerDependencies={peerDependencies}
  componentImport="Tabs"
/>

## API

- For all supported MUI `<Tabs />` props, see [Tabs API](https://mui.com/material-ui/api/tabs/).
- For all supported MUI `<Tab />` props, see [Tab API](https://mui.com/material-ui/api/tab/).

<Canvas>
  <Story name="API">
    {(args) => (
      <Tabs {...args}>
        <Tab id="tab-0--default-api" label="Tortor, morbi" />
        <Tab id="tab-1--default-api" label="Semper metus" />
        <Tab id="tab-2--default-api" label="Urna tempor" />
        <Tab id="tab-3--default-api" label="Eget lectus (disabled)" disabled />
      </Tabs>
    )}
  </Story>
</Canvas>

<ArgsTable story="API" />

## Variants

<VariantRangeNotice />

### Quiet

<Canvas>
  <Story name="Quiet">
    <Tabs styleVariant="quiet">
      <Tab id="tab-0--quiet" label="Tortor, morbi" />
      <Tab id="tab-1--quiet" label="Semper metus" />
      <Tab id="tab-2--quiet" label="Urna tempor" />
      <Tab id="tab-3--quiet" label="Eget lectus (disabled)" disabled />
    </Tabs>
  </Story>
</Canvas>

### Quiet and extended underline

To span the underline to the whole container or viewport add the `extendedUnderline` prop.

<Canvas>
  <Story
    name="Quiet and extended underline"
    parameters={{
      style: {
        overflow: "hidden"
      }
    }}
  >
    <Tabs styleVariant="quiet" extendedUnderline>
      <Tab id="tab-0--quiet" label="Tortor, morbi" />
      <Tab id="tab-1--quiet" label="Semper metus" />
      <Tab id="tab-2--quiet" label="Urna tempor" />
      <Tab id="tab-3--quiet" label="Eget lectus (disabled)" disabled />
    </Tabs>
  </Story>
</Canvas>

### Vertical orientation

Shows vertically oriented tabs

<Canvas>
  <Story name="Vertical orientation">
    <Box sx={{ width: 300 }}>
      <Tabs orientation="vertical">
        <Tab id="tab-0--default" label="Tortor, morbi" />
        <Tab id="tab-1--default" label="Semper metus" />
        <Tab id="tab-2--default" label="Urna tempor" />
        <Tab id="tab-3--default" label="Eget lectus (disabled)" disabled />
      </Tabs>
    </Box>
  </Story>
</Canvas>

### Vertical quiet

<Canvas>
  <Story name="Vertical quiet">
    <Box sx={{ width: 300 }}>
      <Tabs styleVariant="quiet" orientation="vertical">
        <Tab id="tab-0--vertical-quiet" label="Tortor, morbi" />
        <Tab id="tab-1--vertical-quiet" label="Semper metus" />
        <Tab id="tab-2--vertical-quiet" label="Urna tempor" />
        <Tab
          id="tab-3--vertical-quiet"
          label="Eget lectus (disabled)"
          disabled
        />
      </Tabs>
    </Box>
  </Story>
</Canvas>

### Selected value

The initial selected tab defaults to the first, but this can be overriden using the `value` prop.

<Canvas>
  <Story name="Selected value">
    <Tabs value={2}>
      <Tab id="tab-0--default-selected-value" label="Tortor, morbi" />
      <Tab id="tab-1--default-selected-value" label="Semper metus" />
      <Tab id="tab-2--default-selected-value" label="Urna tempor" />
      <Tab
        id="tab-3--default-selected-value"
        label="Eget lectus (disabled)"
        disabled
      />
    </Tabs>
  </Story>
</Canvas>

### Scroll capability

Scroll buttons appear when the element is hovered or pressed.

<Canvas>
  <Story name="Scroll">
    <Tabs styleVariant="default">
      <Tab id="tab-0--scroll" label="Lorem ipsum dolor" />
      <Tab id="tab-1--scroll" label="Sit amet" />
      <Tab id="tab-2--scroll" label="Consectetur adipiscing elit" />
      <Tab id="tab-3--scroll" label="Sed do eiusmod" />
      <Tab id="tab-4--scroll" label="Tempor incididunt" />
      <Tab id="tab-5--scroll" label="Ut labore et dolore" />
    </Tabs>
  </Story>
</Canvas>

### Forward MUI props

Demonstrating capability to forward MUI props. In this particular example, the `selectionFollowsFocus` prop is set to `true`, meaning that when navigating the tabs with a keyboard, the focussed tab will automatically be selected.

<Canvas>
  <Story name="MUI props">
    <Tabs selectionFollowsFocus>
      <Tab id="tab-0--default-forward-props" label="Tortor, morbi" />
      <Tab id="tab-1--default-forward-props" label="Semper metus" />
      <Tab id="tab-2--default-forward-props" label="Urna tempor" />
      <Tab
        id="tab-3--default-forward-props"
        label="Eget lectus (disabled)"
        disabled
      />
    </Tabs>
  </Story>
</Canvas>

### Dynamic tab selection

Demonstrating dynamic tab switching capability. In this particular example, the `value` prop is dynamically set, meaning that a tab can be switched based on a user's decision through another `Form` element. It also demonstrates custom `onChange` prop capability.

<Canvas>
  <Story name="Dynamic tabs">
    {(args) => {
      const [selected, setNewSelected] = useState(0);
      const UIControls = () => (
        <div
          style={{
            display: "flex",
            justifyContent: "right",
            alignItems: "right",
            marginBottom: "1rem"
          }}
        >
          <FormControl id="choose-a-tab">
            <InputLabel>Choose a tab</InputLabel>
            <Select
              defaultValue={selected}
              id="choose-a-tab"
              onChange={(event) => setNewSelected(event.target.value)}
              options={[
                { children: "Tab 1", value: 0 },
                { children: "Tab 2", value: 1 },
                { children: "Tab 3", value: 2 }
              ]}
              value={selected}
              variant="outlined"
            />
          </FormControl>
        </div>
      );
      return (
        <>
          <UIControls />
          <Tabs
            {...args}
            value={selected}
            onChange={(event, value) => setNewSelected(value)}
          >
            <Tab id="tab-0--dynamic-selection" label="Tortor, morbi" />
            <Tab id="tab-1--dynamic-selection" label="Semper metus" />
            <Tab id="tab-2--dynamic-selection" label="Urna tempor" />
            <Tab
              id="tab-3--dynamic-selection"
              label="Eget lectus (disabled)"
              disabled
            />
          </Tabs>
        </>
      );
    }}
  </Story>
</Canvas>

### Dark theme

<Canvas>
  <Story
    name="Dark theme"
    parameters={{
      theme: "dark"
    }}
  >
    <>
      <Box my={6} />
      <Tabs>
        <Tab id="tab-0--dark-default" label="Tortor, morbi" />
        <Tab id="tab-1--dark-default" label="Semper metus" />
        <Tab id="tab-2--dark-default" label="Urna tempor" />
        <Tab id="tab-3--dark-default" label="Eget lectus (disabled)" disabled />
      </Tabs>
      <Box my={6} />
      <Tabs styleVariant="quiet">
        <Tab id="tab-0--dark-quiet" label="Tortor, morbi" />
        <Tab id="tab-1--dark-quiet" label="Semper metus" />
        <Tab id="tab-2--dark-quiet" label="Urna tempor" />
        <Tab id="tab-3--dark-quiet" label="Eget lectus (disabled)" disabled />
      </Tabs>
      <Box my={6} />
      <Tabs styleVariant="quiet" extendedUnderline>
        <Tab id="tab-0--dark-quiet" label="Tortor, morbi" />
        <Tab id="tab-1--dark-quiet" label="Semper metus" />
        <Tab id="tab-2--dark-quiet" label="Urna tempor" />
        <Tab id="tab-3--dark-quiet" label="Eget lectus (disabled)" disabled />
      </Tabs>
      <Box sx={{ width: 300 }} my={6}>
        <Tabs orientation="vertical">
          <Tab id="tab-0--dark-vertical" label="Tortor, morbi" />
          <Tab id="tab-1--dark-vertical" label="Semper metus" />
          <Tab id="tab-2--dark-vertical" label="Urna tempor" />
          <Tab
            id="tab-3--dark-vertical"
            label="Eget lectus (disabled)"
            disabled
          />
        </Tabs>
      </Box>
      <Box sx={{ width: 300 }} my={6}>
        <Tabs styleVariant="quiet" orientation="vertical">
          <Tab id="tab-0--dark-vertical-quiet" label="Tortor, morbi" />
          <Tab id="tab-1--dark-vertical-quiet" label="Semper metus" />
          <Tab id="tab-2--dark-vertical-quiet" label="Urna tempor" />
          <Tab
            id="tab-3--dark-vertical-quiet"
            label="Eget lectus (disabled)"
            disabled
          />
        </Tabs>
      </Box>
    </>
  </Story>
</Canvas>

## Accessibility

- Provide an `aria-label` prop to the Tabs component.
- For details about accessibility decorators for Tabs, visit the [MUI Tabs Accessibility section](https://mui.com/material-ui/react-tabs/#accessibility).

<Canvas>
  <Story name="Accessibility">
    {(args) => (
      <Tabs aria-label="accessibility-example">
        <Tab
          id="tab-0--accessibility-example"
          aria-controls="tabpanel-0--accessibility-example"
          label="Tortor, morbi"
        />
        <Tab
          id="tab-1--accessibility-example"
          aria-controls="tabpanel-1--accessibility-example"
          label="Semper metus"
        />
        <Tab
          id="tab-2--accessibility-example"
          aria-controls="tabpanel-2--accessibility-example"
          label="Urna tempor"
        />
        <Tab
          id="tab-3--accessibility-example"
          aria-controls="tabpanel-3--accessibility-example"
          label="Eget lectus (disabled)"
          disabled
        />
      </Tabs>
    )}
  </Story>
</Canvas>
