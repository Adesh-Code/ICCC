import displayIconList from "../../lib/build/svg/display-icons.json";
import * as displayIconComponents from "../../lib/build/display-icons";
import iconList from "../../lib/build/svg/icons.json";
import * as iconComponents from "../../lib/build/icons";

import { Canvas, Meta, Story } from "@storybook/addon-docs";
import { ComponentTitle, VersionNotice } from "../../../docs/src/partials";
import { version } from "../../package.json";
import SvgIcon from "@mui/material/SvgIcon";
import Typography from "@iccc/typography";

<Meta
  id="components/icon"
  title="Digital HIG/Components/Icon"
  parameters={{ vr: false }}
/>

export const Code = ({ children }) => (
  <Typography variant="code" component="span">
    {children}
  </Typography>
);

export const Icon = ({ component, id, size, type }) => (
  <p
    style={{
      margin: ".25em 0"
    }}
  >
    <SvgIcon fontSize={size} type={type}>
      {component()}
    </SvgIcon>
    <span
      style={{
        verticalAlign: "middle"
      }}
    >
      {" "}
      <Code>&lt;{component.name.replace(/^Svg+/, "")}/&gt;</Code>
    </span>
  </p>
);

export const IconGroup = ({
  group,
  list,
  size = "medium",
  type = "default"
}) => {
  const groupImports = Object.values(group);
  return list
    .map((icon, index) => ({
      ...icon,
      component: groupImports[index]
    }))
    .map((icon) => (
      <Icon
        component={icon.component}
        id={icon.id}
        key={icon.id}
        size={size}
        type={type}
      />
    ));
};

<ComponentTitle name="Icon library" status="Stable" />

<code>
  <VersionNotice packageName="icon" version={version} />
</code>

Digital HIG icons are conveniently wrapped as React components so that they can be imported. This page lists the complete collection of available icons.

For related design documentation, please visit the [Digital HIG icons Figma document](https://www.figma.com/file/BlT5r9tYb2mgog4TJjBOjw/%E2%9D%96-iccc-icons-%26-symbols?node-id=29%3A0).

This component formerly included functionality to create generic icons, which has been [deprecated in favor of `@mui/material/SvgIcon`](/docs/components-svg-icon--api).

## Installation

```bash
yarn add @iccc/icon
```

## Importing icons as React components

Individual icon components can be imported like so:

```jsx
import { Alert } from "@iccc/icon";
```

Colorful display icon components can be imported using the `display-icon` subpath:

```jsx
import { Cancel } from "@iccc/icon/display-icons";
```

Notice for Webpack users: versions of Webpack prior to 5 [do not support](https://github.com/webpack/webpack/issues/9509#issuecomment-1310419920) the `exports` field. Please continue to use fully qualified paths to import individual icon components:

```jsx
import Cancel from "@iccc/icon/lib/build/display-icons/cancel";
```

- More information on package entry points: https://nodejs.org/api/packages.html#package-entry-points
- More information on Webpack site: https://webpack.js.org/guides/package-exports/

For [SVG sprite usage see here](/docs/iccc-documentation-usage-how-to-use-icon-sprite--by-reference).

### Display icons collection

<Story name="Display icons">
  <IconGroup
    group={displayIconComponents}
    list={displayIconList}
    fontSize="extra-large"
  />
</Story>

### Icons collection

<Story name="Icons">
  <IconGroup group={iconComponents} list={iconList} />
</Story>

### Dark theme

The icons make use of `currentColor` and inheritance to automatically adjust the fill color based on the theme.

<Canvas>
  <Story name="Dark theme" parameters={{ theme: "dark" }}>
    <IconGroup
      group={displayIconComponents}
      list={displayIconList}
      fontSize="extra-large"
    />
    <IconGroup group={iconComponents} list={iconList} />
  </Story>
</Canvas>
