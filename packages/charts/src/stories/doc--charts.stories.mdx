import { Meta, Canvas, Story } from "@storybook/addon-docs";
import { ComponentTitle, WarningNotice } from "../../../docs/src/partials";

import Tooltip from "@mui/material/Tooltip";

import { BarPlot } from "@mui/x-charts/BarChart";
import { LinePlot } from "@mui/x-charts/LineChart";
import { ChartContainer } from "@mui/x-charts/ChartContainer";
import { ChartsXAxis } from "@mui/x-charts/ChartsXAxis";
import { ChartsYAxis } from "@mui/x-charts/ChartsYAxis";

import prettier from "prettier/standalone";
import prettierBabel from "prettier/parser-babel";

export const munchies = [
  {
    name: "Cupcake",
    calories: 305,
    fat: 3.7,
    carbs: 67,
    protein: 4.3
  },
  {
    name: "Donut",
    calories: 452,
    fat: 25,
    carbs: 51,
    protein: 4.9
  },
  {
    name: "Honeycomb",
    calories: 408,
    fat: 3.2,
    carbs: 87,
    protein: 6.5
  },
  {
    name: "Ice cream sandwich",
    calories: 237,
    fat: 9,
    carbs: 37,
    protein: 4.3
  },
  {
    name: "Jelly Bean",
    calories: 375,
    fat: 0,
    carbs: 94,
    protein: 0
  }
];

<Meta
  id="components/charts"
  title="Digital HIG/Components/Charts"
  parameters={{ vr: false }}
/>

<ComponentTitle name="Charts" status="In Progress" />

<WarningNotice />

Digital HIG recommends [`@mui/x-charts`](https://mui.com/x/react-charts/) as standard for all data visualization needs. `@mui/x-charts` is a chart library that uses D3.js and SVG to manipulate and render data. It has three customization levels: individual components with defaults, extensive configs, and subcomponents for assembly.

As MUI mentions, this library is in alpha phase. This implies that the components may undergo some significant modifications if required to enhance their performance.

## Installation

```bash
yarn add @mui/x-charts
```

## API

For all `@mui/x-charts` implementation details, see [Charts - Overview](https://mui.com/x/react-charts/) page.

<Canvas>
  <Story
    name="API"
    parameters={{
      docs: {
        source: {
          type: "code"
        },
        transformSource: (input) =>
          prettier.format(input, {
            parser: "babel",
            plugins: [prettierBabel]
          })
      }
    }}
  >
    <ChartContainer
      width={600}
      height={400}
      xAxis={[
        {
          id: "munchies",
          data: munchies.map((munchie) => munchie.name),
          scaleType: "band",
          dataKey: "snack"
        }
      ]}
      yAxis={[
        {
          id: "grams",
          scaleType: "linear"
        },
        {
          id: "calories",
          scaleType: "log"
        }
      ]}
      series={[
        {
          data: munchies.map((munchie) => munchie.protein),
          yAxisKey: "grams",
          type: "bar",
          stack: "",
          id: "protein"
        },
        {
          data: munchies.map((munchie) => munchie.fat),
          yAxisKey: "grams",
          type: "bar",
          stack: "",
          id: "fat"
        },
        {
          data: munchies.map((munchie) => munchie.carbs),
          yAxisKey: "grams",
          type: "bar",
          stack: "",
          id: "carbs"
        },
        {
          data: munchies.map((munchie) => munchie.calories),
          yAxisKey: "calories",
          type: "line",
          id: "calories"
        }
      ]}
    >
      <BarPlot
        slots={{
          bar: ({ ownerState, ...props }) => {
            return (
              <Tooltip
                title={`${ownerState.id}: ${
                  munchies[ownerState.dataIndex][ownerState.id]
                } gr.`}
              >
                <rect {...props} fill={ownerState.color} />
              </Tooltip>
            );
          }
        }}
      />
      <LinePlot />
      <ChartsXAxis label="Munchies" position="bottom" axisId="munchies" />
      <ChartsYAxis label="Grams" position="left" axisId="grams" />
      <ChartsYAxis label="Calories" position="right" axisId="calories" />
    </ChartContainer>
  </Story>
</Canvas>
